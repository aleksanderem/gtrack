# GTRACK Documentation Maintenance Rules

## Overview
This file contains rules that MUST be followed when making code changes to ensure documentation stays up-to-date.

## Core Principle
**Every code change that affects functionality, API, architecture, or user-facing features MUST be reflected in documentation BEFORE or WITH the commit.**

## Documentation Update Requirements

### 1. Backend Changes (Convex)

#### When to Update Documentation:
- ✅ Adding new Convex functions (queries, mutations, actions)
- ✅ Modifying existing function signatures (parameters, return types)
- ✅ Adding new database tables or fields
- ✅ Changing database schema
- ✅ Adding new indexes
- ✅ Modifying error handling or validation logic

#### Required Documentation Updates:
1. **`docs/architecture/backend.md`**:
   - Add/update table schema documentation
   - Document new functions with full signatures
   - Update function behavior descriptions
   - Document new indexes and their purpose

2. **`docs/api/convex.md`**:
   - Add complete API reference for new functions
   - Update existing function documentation if changed
   - Include parameters, return types, examples, error cases

3. **`docs/architecture/data-flow.md`**:
   - Update data flow diagrams if workflow changed
   - Document new data flows for new features

### 2. Frontend Changes (Vue Components)

#### When to Update Documentation:
- ✅ Creating new components
- ✅ Adding new props, events, or slots
- ✅ Changing component behavior or logic
- ✅ Adding new composables or stores
- ✅ Modifying routing structure
- ✅ Changing state management patterns

#### Required Documentation Updates:
1. **Component Documentation** (`docs/components/`):
   - Create new file for new components: `docs/components/{category}/{component-name}.md`
   - Document props, events, slots, state, methods
   - Include usage examples
   - Document data sources and dependencies

2. **`docs/architecture/frontend.md`**:
   - Update component hierarchy if structure changed
   - Update routing structure if routes changed
   - Document new patterns or approaches

3. **Composables/Stores Documentation** (`docs/composables/`, `docs/stores/`):
   - Create documentation for new composables/stores
   - Update existing if API changed
   - Document all exported functions and their usage

4. **`docs/architecture/data-flow.md`**:
   - Update data flow for affected modules
   - Document new data flows

### 3. API Changes (External Integrations)

#### When to Update Documentation:
- ✅ Adding new external API endpoints
- ✅ Changing API request/response formats
- ✅ Modifying authentication methods
- ✅ Adding new error handling
- ✅ Changing rate limiting or retry logic

#### Required Documentation Updates:
1. **`docs/api/external.md`**:
   - Document new endpoints with full request/response examples
   - Update workflow diagrams
   - Document error cases and handling
   - Update authentication/configuration instructions

### 4. Feature Changes

#### When to Update Documentation:
- ✅ Adding new features
- ✅ Modifying feature limits or plans
- ✅ Changing feature behavior
- ✅ Adding new feature flags

#### Required Documentation Updates:
1. **`docs/features/{feature-name}.md`**:
   - Create or update feature documentation
   - Document workflow, components, API usage
   - Update limits and plan requirements

2. **`docs/features/system.md`**:
   - Update feature definitions if config changed
   - Document new features in hierarchy

3. **`docs/features/limits.md`**:
   - Update limit definitions if changed
   - Document enforcement logic changes

### 5. Configuration Changes

#### When to Update Documentation:
- ✅ Modifying `src/config/features.js`
- ✅ Changing environment variables
- ✅ Updating build configuration
- ✅ Modifying routing configuration

#### Required Documentation Updates:
1. **`docs/architecture/overview.md`**:
   - Update technology stack versions
   - Document new configuration options

2. **`docs/guides/setup.md`**:
   - Update environment variable documentation
   - Update installation steps if changed

3. **`docs/features/system.md`**:
   - Update feature configuration documentation

### 6. Data Model Changes

#### When to Update Documentation:
- ✅ Migrating from mock to real data
- ✅ Changing data structures
- ✅ Adding new data sources

#### Required Documentation Updates:
1. **`docs/architecture/data-evolution.md`**:
   - Update migration status table
   - Document migration progress
   - Update migration checklist

2. **`docs/architecture/data-flow.md`**:
   - Update data flow for migrated modules
   - Document new data sources

## Documentation Update Checklist

Before committing, verify:

- [ ] All new functions/APIs are documented
- [ ] All modified functions/APIs have updated documentation
- [ ] Component documentation reflects current props/events/behavior
- [ ] Data flow diagrams are updated if workflows changed
- [ ] Examples in documentation are current and working
- [ ] Migration status is updated if data sources changed
- [ ] README.md and SUMMARY.md are updated if structure changed

## Documentation File Locations

### Architecture
- `docs/architecture/overview.md` - System overview, stack, patterns
- `docs/architecture/backend.md` - Backend schema, functions
- `docs/architecture/frontend.md` - Frontend structure, patterns
- `docs/architecture/data-flow.md` - Data flow patterns
- `docs/architecture/data-evolution.md` - Mock vs real data status

### Components
- `docs/components/views/` - View components
- `docs/components/reviews/` - Reviews module components
- `docs/components/settings/` - Settings module components
- `docs/components/map/` - Map components
- `docs/components/common/` - Shared components

### Composables & Stores
- `docs/composables/` - Composable documentation
- `docs/stores/` - Store documentation

### API
- `docs/api/convex.md` - Convex API reference
- `docs/api/external.md` - External API integrations

### Features
- `docs/features/system.md` - Feature system
- `docs/features/limits.md` - Plans and limits
- `docs/features/{feature-name}.md` - Individual features

### Views
- `docs/views/dashboard.md` - Dashboard view
- `docs/views/reviews.md` - Reviews view
- `docs/views/settings.md` - Settings view

### Guides
- `docs/guides/setup.md` - Setup guide
- `docs/guides/deployment.md` - Deployment guide

## Documentation Format Standards

### Code Examples
- Use actual code from the codebase when possible
- Include file paths and line numbers for references
- Show complete examples, not fragments
- Include error handling examples

### Data Structures
- Show TypeScript-like type definitions
- Include example values
- Document optional vs required fields
- Explain relationships between fields

### Workflows
- Use step-by-step numbered lists
- Include decision points (if/then)
- Show error paths
- Include timing information where relevant

### API Documentation
- Include full function signatures
- Document all parameters with types
- Show return types
- Include error cases
- Provide usage examples
- Document side effects

## Enforcement Rules

### Rule 1: No Undocumented Features
**If you add a new feature, you MUST create or update documentation before committing.**

### Rule 2: No Undocumented API Changes
**If you modify an API (Convex function, external endpoint), you MUST update API documentation before committing.**

### Rule 3: No Undocumented Components
**If you create a new component, you MUST create component documentation before committing.**

### Rule 4: Keep Examples Current
**If you change code that's referenced in documentation examples, you MUST update the examples.**

### Rule 5: Update Migration Status
**If you migrate from mock to real data, you MUST update data-evolution.md before committing.**

### Rule 6: Update Architecture Docs
**If you change architectural patterns (state management, data flow, etc.), you MUST update architecture documentation.**

## Commit Message Format

When updating documentation, include in commit message:

```
docs: [category] [brief description]

- Updated [specific file] with [what changed]
- Added documentation for [new feature/component]
- Fixed documentation for [corrected item]
```

Examples:
```
docs: backend Add new keywords.getStats query documentation
docs: components Document new ReviewItem component
docs: api Update DataForSEO integration workflow
docs: architecture Update data flow for settings module
```

## Review Process

Before merging PRs:
1. Verify all code changes have corresponding documentation updates
2. Check that examples in documentation still work
3. Ensure documentation structure (SUMMARY.md) is updated
4. Verify no broken links in documentation

## Exceptions

Documentation updates may be deferred ONLY if:
- Change is purely cosmetic (styling, formatting)
- Change is in commented-out code
- Change is in test files only
- Documentation update is in separate follow-up commit (documented in PR)

## Maintenance

- Review documentation quarterly for accuracy
- Update examples when APIs change
- Remove outdated sections
- Keep migration status current
- Update technology stack versions regularly

---

# AGENTS.md Maintenance Rules

## Overview
`AGENTS.md` contains repository guidelines, coding standards, and project conventions that MUST be kept up-to-date.

## Core Principle
**Any change to project structure, conventions, build process, or development workflow MUST be reflected in `AGENTS.md` BEFORE or WITH the commit.**

## Update Requirements for AGENTS.md

### 1. Project Structure Changes

#### When to Update:
- ✅ Adding new top-level directories
- ✅ Reorganizing component structure (`src/components/gtrack/`)
- ✅ Changing module organization patterns
- ✅ Adding new artifact directories (`screens/`, `screenshots/`, etc.)
- ✅ Modifying reference directories (`example/`)

#### Required Updates:
- Update "Project Structure & Module Organization" section
- Document new directory purposes
- Update file location guidelines
- Document any structural conventions

### 2. Build & Development Process Changes

#### When to Update:
- ✅ Adding new npm scripts
- ✅ Changing build configuration (Vite, PostCSS, etc.)
- ✅ Modifying development server setup
- ✅ Adding new development tools
- ✅ Changing test runner or test structure

#### Required Updates:
- Update "Build, Test, and Development Commands" section
- Add new commands with descriptions
- Update existing command descriptions if behavior changed
- Document new tools and their usage

### 3. Coding Style & Conventions Changes

#### When to Update:
- ✅ Changing naming conventions (components, files, directories)
- ✅ Modifying indentation or formatting standards
- ✅ Adding new style guidelines (CSS, Tailwind usage)
- ✅ Changing component structure patterns
- ✅ Modifying import/export conventions
- ✅ Updating PrimeVue usage patterns

#### Required Updates:
- Update "Coding Style & Naming Conventions" section
- Document new conventions
- Update examples if patterns changed
- Clarify any ambiguous guidelines

### 4. Testing Guidelines Changes

#### When to Update:
- ✅ Adding new test frameworks or tools
- ✅ Changing test file structure or naming
- ✅ Modifying test execution process
- ✅ Adding new test types (unit, integration, e2e)
- ✅ Changing visual regression testing approach

#### Required Updates:
- Update "Testing Guidelines" section
- Document new test patterns
- Update test command examples
- Document test file organization

### 5. Commit & PR Process Changes

#### When to Update:
- ✅ Changing commit message format
- ✅ Modifying PR requirements
- ✅ Adding new review criteria
- ✅ Changing branching strategy
- ✅ Updating PR template or checklist

#### Required Updates:
- Update "Commit & Pull Request Guidelines" section
- Document new requirements
- Update examples
- Clarify review process

### 6. Technology Stack Changes

#### When to Update:
- ✅ Upgrading major versions (Vue, Vite, PrimeVue, etc.)
- ✅ Adding new dependencies
- ✅ Removing dependencies
- ✅ Changing build tools

#### Required Updates:
- Update relevant sections mentioning technologies
- Document breaking changes in conventions
- Update examples if API changed

## AGENTS.md Update Checklist

Before committing structural or convention changes:

- [ ] Project structure section updated if directories changed
- [ ] Build commands section updated if scripts changed
- [ ] Coding style section updated if conventions changed
- [ ] Testing guidelines updated if test process changed
- [ ] Commit/PR guidelines updated if process changed
- [ ] Examples in AGENTS.md still accurate
- [ ] References to file paths still correct

## Enforcement Rules for AGENTS.md

### Rule 1: Structure Changes
**If you reorganize project structure, you MUST update AGENTS.md before committing.**

### Rule 2: Convention Changes
**If you change coding conventions or style guidelines, you MUST update AGENTS.md before committing.**

### Rule 3: Build Process Changes
**If you add or modify build/development commands, you MUST update AGENTS.md before committing.**

### Rule 4: Test Process Changes
**If you change testing approach or tools, you MUST update AGENTS.md before committing.**

---

# GEMINI.md Maintenance Rules

## Overview
`GEMINI.md` contains session memory, project status, key decisions, and action plans that MUST be kept current.

## Core Principle
**Any change to project status, key decisions, completed tasks, or action plans MUST be reflected in `GEMINI.md` BEFORE or WITH the commit.**

## Update Requirements for GEMINI.md

### 1. Project Status Changes

#### When to Update:
- ✅ Completing major milestones
- ✅ Changing project phase (frontend → backend integration, etc.)
- ✅ Resolving major blockers
- ✅ Changing technology stack status
- ✅ Updating mock vs real data status

#### Required Updates:
- Update "Status Projektu" section
- Update project type/stack if changed
- Update current phase description
- Document any status transitions

### 2. Key Decisions & Findings

#### When to Update:
- ✅ Making architectural decisions
- ✅ Discovering important findings during analysis
- ✅ Resolving ambiguities or contradictions
- ✅ Changing approach to a problem
- ✅ Documenting "why" decisions

#### Required Updates:
- Add to "Kluczowe ustalenia" section
- Document decision rationale
- Update existing findings if proven wrong
- Mark resolved items

### 3. Completed Tasks

#### When to Update:
- ✅ Completing items from "Plan Działania"
- ✅ Finishing major features
- ✅ Resolving issues mentioned in status

#### Required Updates:
- Move completed items to "Completed" section (or mark as done)
- Update "Plan Działania" to reflect progress
- Document what was actually implemented vs planned
- Note any deviations from original plan

### 4. Action Plan Changes

#### When to Update:
- ✅ Adding new tasks to action plan
- ✅ Reprioritizing tasks
- ✅ Removing obsolete tasks
- ✅ Breaking down tasks into subtasks
- ✅ Changing implementation approach

#### Required Updates:
- Update "Plan Działania (Next Steps)" section
- Reorder tasks by priority if changed
- Add completion dates for finished tasks
- Document why tasks were added/removed

### 5. Rules & Conventions Updates

#### When to Update:
- ✅ AGENTS.md was updated (sync rules section)
- ✅ Project conventions changed
- ✅ New patterns established

#### Required Updates:
- Update "Reguły (z AGENTS.md)" section
- Sync with current AGENTS.md content
- Document any GEMINI-specific rules

### 6. Data & Context Updates

#### When to Update:
- ✅ Session date changes (new session)
- ✅ Context changes (new phase of work)
- ✅ Major refactoring completed

#### Required Updates:
- Update date and context at top
- Add new session entries if starting fresh
- Archive old sessions if needed

## GEMINI.md Structure

### Required Sections:
1. **Header**: Date and context
2. **Status Projektu**: Current project state
3. **Kluczowe ustalenia**: Key decisions and findings
4. **Plan Działania**: Action items and next steps
5. **Reguły**: Synced rules from AGENTS.md

### Optional Sections:
- **Completed**: Finished tasks (can be separate or inline)
- **Blockers**: Current impediments
- **Notes**: Additional context

## GEMINI.md Update Checklist

Before committing code that affects project status:

- [ ] Status Projektu reflects current state
- [ ] Kluczowe ustalenia includes new decisions
- [ ] Plan Działania updated with progress
- [ ] Completed tasks marked/archived
- [ ] Reguły section synced with AGENTS.md
- [ ] Date/context updated if new session

## Enforcement Rules for GEMINI.md

### Rule 1: Status Updates
**If project status changes (milestones, phase transitions), you MUST update GEMINI.md before committing.**

### Rule 2: Decision Documentation
**If you make a key architectural or design decision, you MUST document it in GEMINI.md before committing.**

### Rule 3: Task Completion
**If you complete a task from the action plan, you MUST update GEMINI.md to reflect completion.**

### Rule 4: Plan Changes
**If you change the action plan (add/remove/reprioritize tasks), you MUST update GEMINI.md before committing.**

### Rule 5: Rule Sync
**If AGENTS.md is updated, you MUST sync the rules section in GEMINI.md.**

## Commit Message Format for GEMINI.md

When updating GEMINI.md, include in commit message:

```
docs: memory Update GEMINI.md with [what changed]

- Updated project status: [description]
- Documented decision: [decision]
- Completed task: [task name]
- Updated action plan: [changes]
```

Examples:
```
docs: memory Update GEMINI.md - completed mock data centralization
docs: memory Update GEMINI.md - documented API layer decision
docs: memory Update GEMINI.md - updated project status to backend integration phase
```

## Commit Message Format for AGENTS.md

When updating AGENTS.md, include in commit message:

```
docs: guidelines Update AGENTS.md with [what changed]

- Updated [section]: [description]
- Added convention: [convention]
- Modified build process: [changes]
```

Examples:
```
docs: guidelines Update AGENTS.md - added new test command
docs: guidelines Update AGENTS.md - updated component naming conventions
docs: guidelines Update AGENTS.md - modified PR requirements
```

## Maintenance Schedule

### AGENTS.md
- Review after major refactorings
- Update when conventions evolve
- Sync with actual project structure quarterly

### GEMINI.md
- Update at start of each work session
- Update when completing major milestones
- Archive old sessions monthly
- Review and consolidate quarterly

